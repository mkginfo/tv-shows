import{_ as $}from"./default-image.7538c0a6.js";import{d as H,u as k,S as g,_ as p,r as L,o as n,c,a as l,t as m,b as B,e as I,f as o,p as M,g as z,h as A,i as F,j as f,k as h,F as v,l as V,m as R,w as T,n as W}from"./index.c9b0b34e.js";function D(e=[]){return e.sort((t,s)=>{var a,i;return((a=t==null?void 0:t.rating)!=null?a:0)>((i=s==null?void 0:s.rating)!=null?i:0)?-1:1})}function q(e=[],t=[]){const s={};for(const a of t)s[a]=e.filter(i=>i.genres.includes(a));return s}var C=(e=>(e.Action="Action",e.Adventure="Adventure",e.Anime="Anime",e.Comedy="Comedy",e.Crime="Crime",e.Drama="Drama",e.Espionage="Espionage",e.Family="Family",e.Fantasy="Fantasy",e.History="History",e.Horror="Horror",e.Legal="Legal",e.Medical="Medical",e.Music="Music",e.Mystery="Mystery",e.Romance="Romance",e.ScienceFiction="Science-Fiction",e.Sports="Sports",e.Supernatural="Supernatural",e.Thriller="Thriller",e.War="War",e.Western="Western",e))(C||{});const N=k(),E=H("main",{state:()=>({_homeSelection:null,_results:[],_showDetails:null,loading:{sections:!1,results:!1,details:!1}}),getters:{homeSelection:e=>e._homeSelection,searchResults:e=>e._results,showDetails:e=>e._showDetails,areSectionsLoading:e=>e.loading.sections,areResultsLoading:e=>e.loading.results,areDetailsLoading:e=>e.loading.details},actions:{async generateHomeSelection(){this.loading.sections=!0;const e=await g.getAllShows(),t=D(e),s=q(t,Object.keys(C));this._homeSelection=s,this.loading.sections=!1},async fetchResults(e){this.loading.results=!0;const t=await g.searchByTerm(e);this._results=D(t.map(s=>s.show)),this.loading.results=!1},async fetchShowDetails(e){var s,a,i,_,r;this.loading.details=!0;const t=await g.getShowDetails(e);this._showDetails={info:{id:e,image:((s=t.image)==null?void 0:s.original)||((a=t.image)==null?void 0:a.medium),name:t.name,summary:t.summary,average:(i=t.rating)==null?void 0:i.average},seasons:((_=t._embedded)==null?void 0:_.seasons)||[],cast:((r=t._embedded)==null?void 0:r.cast)||[]},this.loading.details=!1},removeShowDetails(){this._showDetails=null},searchText(){var e;return(e=N.query)==null?void 0:e.q}}});const j={class:"horizontal-section"},Y={class:"horizontal-section__title"},O={__name:"HorizontalSection",props:{name:{type:String,required:!0}},setup(e){const t=L(null);function s(a){var r,u;const i=Math.abs(a.deltaY)!==0,_=((r=t.value)==null?void 0:r.scrollWidth)>((u=t.value)==null?void 0:u.clientWidth);i&&_&&(a.preventDefault(),t.value.scrollLeft+=a.deltaY)}return(a,i)=>(n(),c("section",j,[l("h2",Y,m(e.name),1),l("div",{class:"horizontal-section__content",ref_key:"scrollContainer",ref:t,onWheel:s},[B(a.$slots,"default",{},void 0,!0)],544)]))}},U=p(O,[["__scopeId","data-v-e940cd2c"]]);const J={class:"cast-card"},K=["src"],P={class:"cast-card__name"},Q={__name:"CastCard",props:{name:{type:String,required:!0},image:{type:String,default:"@/assets/images/default_person.png"}},setup(e){return(t,s)=>(n(),c("div",J,[l("img",{src:e.image,alt:"",class:"cast-card__image"},null,8,K),l("span",P,m(e.name),1)]))}},X=p(Q,[["__scopeId","data-v-bcf91ab4"]]);const Z={__name:"GoBackButton",setup(e){const t=I();return(s,a)=>(n(),c("button",{class:"go-back-button",onClick:a[0]||(a[0]=i=>o(t).go(-1))}," \u{1F448} Go back to home "))}},G=p(Z,[["__scopeId","data-v-aed2b066"]]);const ee={},se=e=>(M("data-v-08e9a8ed"),e=e(),z(),e),te={class:"container"},ae=se(()=>l("span",{id:"spinner"},null,-1)),oe=[ae];function ne(e,t){return n(),c("div",te,oe)}const ie=p(ee,[["render",ne],["__scopeId","data-v-08e9a8ed"]]);const ce={class:"details-page"},le={class:"info"},re=["src"],_e={key:1,src:$,class:"info__image",alt:"Show Image"},de={class:"info__description"},ue={class:"title"},he={key:0},me={class:"seasons"},pe=["innerHTML"],ge={__name:"ShowDetailsView",setup(e){const t=k(),s=E();return A(()=>{var a;(a=t.params)!=null&&a.id&&s.fetchShowDetails(t.params.id)}),F(()=>{s.removeShowDetails()}),(a,i)=>{var _,r,u,S,y,w;return n(),c("div",ce,[o(s).areDetailsLoading?(n(),f(ie,{key:0})):h("",!0),o(s).showDetails&&!o(s).areDetailsLoading?(n(),c(v,{key:1},[V(G,{class:"back-cta"}),l("div",le,[(_=o(s).showDetails.info)!=null&&_.image?(n(),c("img",{key:0,class:"info__image",src:(r=o(s).showDetails.info)==null?void 0:r.image,alt:"Show Image"},null,8,re)):(u=o(s).showDetails.info)!=null&&u.image?h("",!0):(n(),c("img",_e)),l("div",de,[l("h1",ue,[R(m((S=o(s).showDetails.info)==null?void 0:S.name)+" ",1),o(s).showDetails.info.average?(n(),c("span",he,"(\u2B50 "+m(o(s).showDetails.info.average)+")",1)):h("",!0)]),l("h4",me,m((y=o(s).showDetails.seasons)==null?void 0:y.length)+" Seasons ",1),l("p",{innerHTML:(w=o(s).showDetails.info)==null?void 0:w.summary},null,8,pe)])]),o(s).showDetails.cast.length?(n(),f(U,{key:0,name:"Cast",class:"cast"},{default:T(()=>[(n(!0),c(v,null,W(o(s).showDetails.cast,({person:{id:b,name:x,image:d}})=>(n(),f(X,{key:b,name:x,image:(d==null?void 0:d.original)||(d==null?void 0:d.medium)},null,8,["name","image"]))),128))]),_:1})):h("",!0)],64)):h("",!0)])}}},ye=p(ge,[["__scopeId","data-v-e78ce9fe"]]);export{ye as default};
