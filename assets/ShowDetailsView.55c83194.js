import{_ as $}from"./default-image.7538c0a6.js";import{d as H,u as k,S as g,_ as p,r as L,o as n,c,a as l,t as m,b as B,e as I,f as o,p as M,g as z,h as A,i as F,j as f,k as h,F as v,l as V,m as R,w as T,n as W}from"./index.79a42c4a.js";function D(s=[]){return s.sort((t,e)=>{var a,i;return((a=t==null?void 0:t.rating)!=null?a:0)>((i=e==null?void 0:e.rating)!=null?i:0)?-1:1})}function q(s=[],t=[]){const e={};for(const a of t)e[a]=s.filter(i=>i.genres.includes(a));return e}var C=(s=>(s.Action="Action",s.Adventure="Adventure",s.Anime="Anime",s.Comedy="Comedy",s.Crime="Crime",s.Drama="Drama",s.Espionage="Espionage",s.Family="Family",s.Fantasy="Fantasy",s.History="History",s.Horror="Horror",s.Legal="Legal",s.Medical="Medical",s.Music="Music",s.Mystery="Mystery",s.Romance="Romance",s.ScienceFiction="Science-Fiction",s.Sports="Sports",s.Supernatural="Supernatural",s.Thriller="Thriller",s.War="War",s.Western="Western",s))(C||{});const N=k(),E=H("main",{state:()=>({_homeSelection:null,_results:[],_showDetails:null,loading:{sections:!1,results:!1,details:!1}}),getters:{homeSelection:s=>s._homeSelection,searchResults:s=>s._results,showDetails:s=>s._showDetails,areSectionsLoading:s=>s.loading.sections,areResultsLoading:s=>s.loading.results,areDetailsLoading:s=>s.loading.details},actions:{async generateHomeSelection(){this.loading.sections=!0;const s=await g.getAllShows(),t=D(s),e=q(t,Object.keys(C));this._homeSelection=e,this.loading.sections=!1},async fetchResults(s){this.loading.results=!0;const t=await g.searchByTerm(s);this._results=D(t.map(e=>e.show)),this.loading.results=!1},async fetchShowDetails(s){var e,a,i,_,r;this.loading.details=!0;const t=await g.getShowDetails(s);this._showDetails={info:{id:s,image:((e=t.image)==null?void 0:e.original)||((a=t.image)==null?void 0:a.medium),name:t.name,summary:t.summary,average:(i=t.rating)==null?void 0:i.average},seasons:((_=t._embedded)==null?void 0:_.seasons)||[],cast:((r=t._embedded)==null?void 0:r.cast)||[]},this.loading.details=!1},removeShowDetails(){this._showDetails=null},searchText(){var s;return(s=N.query)==null?void 0:s.q}}});const j={class:"horizontal-section"},Y={class:"horizontal-section__title"},O={__name:"HorizontalSection",props:{name:{type:String,required:!0}},setup(s){const t=L(null);function e(a){var r,u;const i=Math.abs(a.deltaY)!==0,_=((r=t.value)==null?void 0:r.scrollWidth)>((u=t.value)==null?void 0:u.clientWidth);i&&_&&(a.preventDefault(),t.value.scrollLeft+=a.deltaY)}return(a,i)=>(n(),c("section",j,[l("h2",Y,m(s.name),1),l("div",{class:"horizontal-section__content",ref_key:"scrollContainer",ref:t,onWheel:e},[B(a.$slots,"default",{},void 0,!0)],544)]))}},U=p(O,[["__scopeId","data-v-c32dfd89"]]);const J={class:"cast-card"},K=["src"],P={class:"cast-card__name"},Q={__name:"CastCard",props:{name:{type:String,required:!0},image:{type:String,default:"@/assets/images/default_person.png"}},setup(s){return(t,e)=>(n(),c("div",J,[l("img",{src:s.image,alt:"",class:"cast-card__image"},null,8,K),l("span",P,m(s.name),1)]))}},X=p(Q,[["__scopeId","data-v-8ceb361b"]]);const Z={__name:"GoBackButton",setup(s){const t=I();return(e,a)=>(n(),c("button",{class:"go-back-button",onClick:a[0]||(a[0]=i=>o(t).go(-1))}," \u{1F448} Go back to previous screen "))}},G=p(Z,[["__scopeId","data-v-c3c06c7a"]]);const ss={},es=s=>(M("data-v-c9615330"),s=s(),z(),s),ts={class:"container"},as=es(()=>l("span",{id:"spinner"},null,-1)),os=[as];function ns(s,t){return n(),c("div",ts,os)}const is=p(ss,[["render",ns],["__scopeId","data-v-c9615330"]]);const cs={class:"details-page"},ls={class:"info"},rs=["src"],_s={key:1,src:$,class:"info__image",alt:"Show Image"},ds={class:"info__description"},us={class:"title"},hs={key:0},ms={class:"seasons"},ps=["innerHTML"],gs={__name:"ShowDetailsView",setup(s){const t=k(),e=E();return A(()=>{var a;(a=t.params)!=null&&a.id&&e.fetchShowDetails(t.params.id)}),F(()=>{e.removeShowDetails()}),(a,i)=>{var _,r,u,S,y,w;return n(),c("div",cs,[o(e).areDetailsLoading?(n(),f(is,{key:0})):h("",!0),o(e).showDetails&&!o(e).areDetailsLoading?(n(),c(v,{key:1},[V(G,{class:"back-cta"}),l("div",ls,[(_=o(e).showDetails.info)!=null&&_.image?(n(),c("img",{key:0,class:"info__image",src:(r=o(e).showDetails.info)==null?void 0:r.image,alt:"Show Image"},null,8,rs)):(u=o(e).showDetails.info)!=null&&u.image?h("",!0):(n(),c("img",_s)),l("div",ds,[l("h1",us,[R(m((S=o(e).showDetails.info)==null?void 0:S.name)+" ",1),o(e).showDetails.info.average?(n(),c("span",hs,"(\u2B50 "+m(o(e).showDetails.info.average)+")",1)):h("",!0)]),l("h4",ms,m((y=o(e).showDetails.seasons)==null?void 0:y.length)+" Seasons ",1),l("p",{innerHTML:(w=o(e).showDetails.info)==null?void 0:w.summary},null,8,ps)])]),o(e).showDetails.cast.length?(n(),f(U,{key:0,name:"Cast",class:"cast"},{default:T(()=>[(n(!0),c(v,null,W(o(e).showDetails.cast,({person:{id:b,name:x,image:d}})=>(n(),f(X,{key:b,name:x,image:(d==null?void 0:d.original)||(d==null?void 0:d.medium)},null,8,["name","image"]))),128))]),_:1})):h("",!0)],64)):h("",!0)])}}},ys=p(gs,[["__scopeId","data-v-969a63b4"]]);export{ys as default};
